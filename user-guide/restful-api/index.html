<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="base-url" content="http://venusplus.cn/">
    <link type="image/png" href="/images/head.png" rel="shortcut icon" />
    <base href="http://venusplus.cn/">
    <link rel="stylesheet" href="css/main.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_18677_3gesaak2gctyb9.css">
    <link href="css/default.css" rel="stylesheet">
    <link href="css/vendor/antd.min.css" rel="stylesheet">
    <link href="css/vendor/swiper.min.css" rel="stylesheet">
    <title>Venus中间件-7.RESTFul API</title>
    <script src="js/vendor/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/common.min.js" type="text/javascript" charset="utf-8"></script>
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">

  </head>
  <body data-url="/user-guide/restful-api/" class="theme">
    
<div class="header">
  <div>
    <div class="header-wrapper">
      <div class="header-logo">
        <a href=/>
          <img src="/images/logo.png" alt="">
        </a>
      </div>
      <ul class="sofa-menu ant-menu ant-menu-horizontal ant-menu-light ant-menu-root" role="menu">
        
          <li class="ant-menu-item sofa-menu-item  ">
              
              <div class="sofa-menu-item-text">
                
                  <a href="/">首页</a>
                
                
                
              </div>
          </li>
        
          <li class="ant-menu-item sofa-menu-item  ">
              
              <div class="product-menu">
                <div class="product-menu-wrapper">
                  
                    <div class="product-menu-col">
                      <div class="product-menu-title">快速开发框架</div>
                      
                        <a href=/product/venus class="product-menu-title-link">Venus</a>
                      
                        <a href=/product/venusboot class="product-menu-title-link">Venus Boot</a>
                      
                    </div>
                  
                    <div class="product-menu-col">
                      <div class="product-menu-title">微服务框架</div>
                      
                        <a href=/product/venus-cloud class="product-menu-title-link">Venus Cloud</a>
                      
                    </div>
                  
                    <div class="product-menu-col">
                      <div class="product-menu-title">经典中间件</div>
                      
                        <a href=/product/talos class="product-menu-title-link">Talos网关</a>
                      
                    </div>
                  
                    <div class="product-menu-col">
                      <div class="product-menu-title">数据中间件</div>
                      
                        <a href=/product/venus-dts class="product-menu-title-link">Venus DTS</a>
                      
                    </div>
                  
                    <div class="product-menu-col">
                      <div class="product-menu-title">工具和公共类库</div>
                      
                        <a href=/product/venus-codegen class="product-menu-title-link">Venus CodeGen</a>
                      
                    </div>
                  
                </div>
              </div>
              
              <div class="sofa-menu-item-text">
                
                  <a href="javascript:;">产品</a>
                
                
                
              </div>
          </li>
        
          <li class="ant-menu-item sofa-menu-item  ">
              
              <div class="sofa-menu-item-text">
                
                  <a href="/#">文档</a>
                
                
                
              </div>
          </li>
        
          <li class="ant-menu-item sofa-menu-item  ">
              
              <div class="sofa-menu-item-text">
                
                  <a href="/#">控制台</a>
                
                
                
              </div>
          </li>
        
          <li class="ant-menu-item sofa-menu-item  ">
              
              <div class="sofa-menu-item-text">
                
                  <a href="/#">关于我们</a>
                
                
                
              </div>
          </li>
        

      </ul>
      <div class="sofa-menu-right pull-right">
       
        <div class="search">
          <span class="ant-input-group-wrapper" style="width: 262px;">
            <span class="ant-input-wrapper ant-input-group">
              
              <span class="ant-input-search ant-input-affix-wrapper">
                <form class="search-form" action=/search method="get">
                    <input type="text" name="q" placeholder="请输入搜索内容" value="" class="ant-input" autocomplete="off" />
                    <input type="hidden" name="title" value="新人上手">
                </form>
                <span class="ant-input-suffix">
                  <i class="anticon anticon-search ant-input-search-icon"></i>
                </span>
              </span>
            </span>
          </span>
        </div>

       
        
      </div>
    </div>
  </div>
</div>

    <div class="main">
      
  
  
    <div class="pg-artical " id="pg-artical">
      <div class="wrap">
        
<div class="nav-section">
  <div class="navbar">
    <span class="larkicon larkicon-toc"></span>
  </div>
  <nav class="nav-container">
    <ul class="catalog">
      
        
        <li class="current-book">
          <span class="name">新人上手3</span>
          <div class="liebiao-wrapper">
            
              <i id="title-liebiao-icon" class="title-liebiao-icon iconfont icon-liebiao"></i>
            

            <div class="docs-map">
              <div class="docs-map-wrapper">
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">开发框架</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/#">Venus Framework</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">微服务框架</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/twa">Venus Cloud</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">中间件</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/talos">Talos网关</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">数据库中间件</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/venus-dts">DTS</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">工具类</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/venus-codegen">CodeGen</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
                  
                  <div class="docs-map-item">
                    <div>
                      <h3 class="title">帮助中心</h3>
                      
                        <div class="docs-map-item-link-wrapper">
                          <a class="docs-map-item-link" href="/user-guide">新人上手</a>
                        </div>
                      
                    </div>
                  </div>
                  
                
              </div>
            </div>
          </div>

        </li>
        
          <li class="nav-item depth1   " data-currentPath="1" data-rootPath="1"><a href="user-guide/readme" class="">
              简介
            </a></li>
        
          <li class="nav-item depth1   " data-currentPath="2" data-rootPath="2"><a href="user-guide/product-application-intro" class="">
              产品与应用
            </a></li>
        
          <li class="nav-item depth1   " data-currentPath="3" data-rootPath="3"><a href="user-guide/sprint-intro" class="">
              应用研发
            </a></li>
        
          <li class="nav-item depth1   " data-currentPath="4" data-rootPath="4"><a href="user-guide/service-intro" class="">
              服务
            </a></li>
        
      
    </ul>
  </nav>
</div>

        <div class="main-container">
          <div id="page-toc"></div>
          <div class="artical-section larksite">
    <div class="doc-article">
      <article class="doc-article-inner">
        <div class="typo">
          <h1 class="typo-title" itemprop="title">
          7.RESTFul API
          </h1>
          <p class="meta">更新时间: <span>2017-1-6</span></p>
          <div class="typo-content">
            <p><p>Basement 的所有服务均通过 RESTFul API 的形式开放给用户，因此你可以使用任意语言根据本 API 来<br />
调用 Basement 的服务。当然如果你使用的语言有对应的 SDK，那么我们推荐你优先使用 SDK，因为 SDK<br />
会自动帮你处理好很多琐碎的细节问题，这比直接调用本 API 要简单很多。</p>
<p>如果你还没有设置你的项目，请先阅读 <a href="user-guide/client-and-config">客户端选择与配置</a>。</p>
<h2 id="参数说明"><a class="anchor" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="octicon octicon-link"></span></a> 参数说明</h2>
<p>为了便于理解，我们用几个具体的例子来演示 API 的调用。</p>
<p><strong>注意</strong></p>
<ol>
<li>本 API 中的所有例子均会以 curl 命令做演示。</li>
<li>除本页展示的例子，具体的 API 调用和返回示例，JSON 格式的字符串可能以等价 JSON 数据展示。</li>
</ol>
<p>假定我们想调用 render 的服务上传一个简单的 pack，代码如下：</p>
<pre><code>curl <br />
 -X PUT <br />
 -H &quot;x-base-id:${appId}&quot; <br />
 -H &quot;x-base-masterkey:${masterKey}&quot; <br />
 -H &quot;content-type: application/json&quot; <br />
 -d &lsquo;{&quot;name&quot;:&quot;hello_render&quot;,&quot;pack&quot;:{&quot;index.html&quot;: &quot;hello {{ name }}!&quot;,&quot;index.json&quot;:&quot;{&amp;quot;name&amp;quot;: &amp;quot;render&amp;quot;}&quot;}}&rsquo; <br />
 -i <br />
 ${endPoint}/api/1.0/renders
</code></pre>
<p>返回的 body 形如：</p>
<pre><code>{&quot;updatedAt&quot;:&quot;Mon, 29 Aug 2016 03:59:03 GMT&quot;,&quot;md5&quot;:&quot;E0E303057BFC2B7FDB9F180236042997&quot;}
</code></pre>
<p>然后你希望通过 render 的查询功能查询刚刚上传的 pack：</p>
<pre><code>curl <br />
 -X GET  <br />
 -H &quot;x-base-id:${appId}&quot; <br />
 -H &quot;x-base-masterkey:${masterKey}&quot; <br />
 -i <br />
 ${endPoint}/api/1.0/renders/hello_render
</code></pre>
<p>返回的 body 形如：</p>
<pre><code>{&quot;lastModified&quot;:&quot;Mon, 29 Aug 2016 03:59:03 GMT&quot;,&quot;content&quot;:&quot;{&amp;quot;index.html&amp;quot;:&amp;quot;hello {{ name }}!&amp;quot;,&amp;quot;index.json&amp;quot;:&amp;quot;{\&amp;quot;name\&amp;quot;: \&amp;quot;render\&amp;quot;}&amp;quot;}&quot;}
</code></pre>
<h3 id="请求参数"><a class="anchor" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="octicon octicon-link"></span></a> 请求参数</h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td>String</td>
<td>是</td>
<td>可能的值有 GET, POST, PUT, DELETE</td>
</tr>
<tr>
<td>appId</td>
<td>String</td>
<td>是</td>
<td>应用 id，通过自定义请求头 <code>X-Base-Id</code> 设置</td>
</tr>
<tr>
<td>masterKey</td>
<td>String</td>
<td>是</td>
<td>应用主 key，通过自定义请求头 <code>X-Base-MasterKey</code> 设置</td>
</tr>
<tr>
<td>contentType</td>
<td>String</td>
<td>否</td>
<td>当请求包含 JSON 格式的数据时，需设置请求头 <code>Content-Type: application/json</code></td>
</tr>
<tr>
<td>data</td>
<td>视具体 API 而定，一般为 JSON</td>
<td>否</td>
<td>请求时发送的数据</td>
</tr>
<tr>
<td>endPoint</td>
<td>String</td>
<td>是</td>
<td>请求的 url，所有可选值参见 <a href="user-guide/.client_and_config.md#%E7%8E%AF%E5%A2%83">客户端选择与配置的环境部分</a><br /><strong>注意</strong> 如果是线上应用访问 basement 的服务，请使用 <code>basement-pool.${zone}.alipay.com</code> 形式的内部域名，否则应用上线后可能无法访问。</td>
</tr>
</tbody>
</table>
<p>其中 appId、masterKey 和 endPoint 为必填公共参数，在具体的 API 说明中将不再赘述。</p>
<h2 id="返回值"><a class="anchor" href="#%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="octicon octicon-link"></span></a> 返回值</h2>
<p>详见每个 API 说明。</p>
<h2 id="错误说明"><a class="anchor" href="#%E9%94%99%E8%AF%AF%E8%AF%B4%E6%98%8E"><span class="octicon octicon-link"></span></a> 错误说明</h2>
<p>假定我们上传 pack 时忘记指定 pack 的名称了，API 就会发生错误：</p>
<pre><code>curl <br />
 -X PUT <br />
 -H &quot;x-base-id:${appId}&quot; <br />
 -H &quot;x-base-masterkey:${masterKey}&quot; <br />
 -H &quot;content-type: application/json&quot; <br />
 -d &lsquo;{&quot;pack&quot;:{&quot;index.html&quot;: &quot;hello {{ name }} !&quot;,&quot;index.json&quot;:&quot;{&amp;quot;name&amp;quot;: &amp;quot;render&amp;quot;}&quot;}}&rsquo; <br />
 -i <br />
 ${endPoint}/api/1.0/renders
</code></pre>
<p>返回内容形如：</p>
<pre><code>HTTP/1.1 422 Unprocessable Entity
&hellip;响应头</p>

<p>{&quot;code&quot;:208,&quot;error&quot;:&quot;Pack Name Error&quot;,&quot;addition&quot;:{},&quot;documentation_url&quot;:&quot;<a href="http://doc.basement.alipay.com/tutorial/errors#208&quot;">http://doc.basement.alipay.com/tutorial/errors#208&quot;</a>}
</code></pre>
<p>任何非 200 的状态码都表明 API 在调用的过程中出现了错误。除了像 404 这样含义明确的状态码，返回<br />
其他状态码时还会在返回的 body 中携带 JSON 格式的错误详情。</p>
<h3 id="错误详情"><a class="anchor" href="#%E9%94%99%E8%AF%AF%E8%AF%A6%E6%83%85"><span class="octicon octicon-link"></span></a> 错误详情</h3>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>错误码，不同服务使用了不同区间的错误码，例如 <code>2xx</code> 错误码则是 render 服务相关的</td>
</tr>
<tr>
<td>error</td>
<td>String</td>
<td>错误的简要说明</td>
</tr>
<tr>
<td>addition</td>
<td>object</td>
<td>引发错误的一些附加信息，由每个 API 决定要传入的内容</td>
</tr>
<tr>
<td>documentation_url</td>
<td>String</td>
<td>线上文档访问地址</td>
</tr>
</tbody>
</table></p>

          </div>
        </div>
      </article>
    </div>
  </div>
        </div>
      </div>
    </div>
    <div class="mask hidden"></div>
    
      <script src="https://gw.alipayobjects.com/as/g/lark/site-toc/2.0.9/toc.js"></script>
<script>
  $('#page-toc').generateToc({
    contentContainer: $('.typo'),
    hasFirstLevelHeader: false,
    offsetTop: 0,
    affix: {
      bgColor: "transparent",
    },
  })
</script>

    
  

    </div>
    <div class="ant-row footer" style="background-image: linear-gradient(180deg,#050b22 0,#050b22 50%,#032158);">
  <div class="footer-content">
    <div class="ant-row footer-desc">
      <div class="ant-col-8 ant-col-offset-2 footer-team">
        <h4>我们的团队</h4>
        <p>中国，上海</p>
      </div>
      <div class="ant-col-4 ant-col-offset-2 footer-friend">
        <h4>友情链接</h4>
        <p>
          <a href="http://xujin.org">许进沉思录</a>
        </p>
        <p>
          <a href="https://springcloud.cn">Spring Cloud中国社区</a>
        </p>

      </div>
      <div class="ant-col-6 ant-col-offset-2 footer-contact">
        <h4>联系我们</h4>
        <p>业务咨询：<a href="mailto: Software_King@qq.com">Software_King@qq.com</a></p>
        <p>技术咨询：<a href="mailto: Software_King@qq.com">Software_King@qq.com</a></p>
        
      </div>
    </div>
    <div class="copyright">
      Venus Plus版权所有 &copy; 2017-2020 Venus中间件团队体系  Powered by xujin.org
    </div>
  </div>
</div>


    
    <div style="display: none">
    <script src="https://s19.cnzz.com/z_stat.php?id=1268345961&web_id=1268345961" language="JavaScript"></script>
    </div>
    
    <script>
    window.SupportConfig = {
      appId: "5a027aa32cfc95272917b0c6",
      host: "https://links.test.alipay.net/",
      bottom: "20px",
      right: "50px",
      opacity: 1
    }
    
      
      
    
    
      
      
    
  </script>
  <script>function l(){var t=d.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://links.test.alipay.net/init.js?_=1";var e=d.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}var w=window,d=document,i=function(){i.c(arguments)};i.q=[],i.c=function(t){i.q.push(t)},w.SupportNs=i,w.attachEvent?w.attachEvent("onload",l):w.addEventListener("load",l,!1);</script>
  </body>
</html>


